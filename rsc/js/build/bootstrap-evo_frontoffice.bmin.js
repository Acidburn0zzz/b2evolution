/* This includes 4 files: src/bootstrap-evo_modal_window.js, src/evo_user_crop.js, src/evo_user_report.js, src/evo_user_contact_groups.js */
function openModalWindow(a,b,c,d,e,f,g,h){var i="undefined"==typeof b||"auto"==b?"":"width:"+b+";",j="undefined"==typeof c||0==c||""==c?"":"height:"+c,k=j.match(/%$/i)?' style="height:100%;overflow:hidden;"':"",l=c.match(/px/i)?' style="min-height:'+(c.replace("px","")-157)+'px"':"",m="undefined"==typeof f||0!=f;if("undefined"!=typeof f&&""!=f)if("object"==typeof f)var n=f[0],o=f[1],p="undefined"==typeof f[2]?"form":f[2];else var n=f,o="btn-primary",p="form";if("undefined"!=typeof g&&g&&jQuery("#modal_window").remove(),0==jQuery("#modal_window").length){var q='<div id="modal_window" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog" style="'+i+j+'"><div class="modal-content"'+k+">";"undefined"!=typeof e&&""!=e&&(q+='<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">'+e+"</h4></div>"),q+='<div class="modal-body"'+k+l+">"+a+"</div>",m&&(q+='<div class="modal-footer">',"undefined"!=typeof f&&""!=f&&(q+='<button class="btn '+o+'" type="submit" style="display:none">'+n+"</button>"),q+='<button class="btn btn-default" data-dismiss="modal" aria-hidden="true">'+evo_js_lang_close+"</button></div>"),q+="</div></div></div>",jQuery("body").append(q)}else jQuery("#modal_window .modal-body").html(a);m&&("undefined"!=typeof h&&h||(jQuery("#modal_window legend").remove(),jQuery("#modal_window #close_button").remove(),jQuery("#modal_window .panel, #modal_window .panel-body").removeClass("panel panel-default panel-body")),0==jQuery("#modal_window "+p+" input[type=submit]").length?jQuery("#modal_window .modal-footer button[type=submit]").hide():(jQuery("#modal_window "+p+" input[type=submit]").hide(),jQuery("#modal_window .modal-footer button[type=submit]").show()),jQuery("#modal_window"+p).change(function(){var a=jQuery(this).find("input[type=submit]");a.length>0?(a.hide(),jQuery("#modal_window .modal-footer button[type=submit]").show()):jQuery("#modal_window .modal-footer button[type=submit]").hide()}),jQuery("#modal_window .modal-footer button[type=submit]").click(function(){jQuery("#modal_window "+p+" input[type=submit]").click()})),jQuery("#modal_window "+p+" a.btn").each(function(){jQuery("#modal_window .modal-footer").prepend("<a href="+jQuery(this).attr("href")+'><button type="button" class="'+jQuery(this).attr("class")+'">'+jQuery(this).html()+"</button></a>"),jQuery(this).remove()}),jQuery("#modal_window "+p+" #current_modal_title").length>0&&jQuery("#modal_window .modal-title").html(jQuery("#modal_window "+p+" #current_modal_title").html());var r={};modal_window_js_initialized&&(r="show"),jQuery("#modal_window").modal(r),""==i&&(jQuery("#modal_window .modal-dialog").css({display:"table",width:"auto"}),jQuery("#modal_window .modal-dialog .modal-content").css({display:"table-cell"})),jQuery("#modal_window").on("hidden",function(){jQuery(this).remove()}),modal_window_js_initialized=!0}function closeModalWindow(a){return"undefined"==typeof a&&(a=window.document),jQuery("#modal_window",a).remove(),!1}function user_crop_avatar(a,b,c){"undefined"==typeof c&&(c="avatar");var d=750,e=320,f=jQuery(window).width(),g=jQuery(window).height(),h=f,i=g;i=i>d?d:i<e?e:i,h=h>d?d:h<e?e:h;var j=170,k=g>d?170:205;f<=900&&(j=35,k=325);var l=h-j,m=i-k,n=130;l=l<n?n:l,m=m<n?n:m,openModalWindow('<span class="loader_img loader_user_report absolute_center" title="'+evo_js_lang_loading+'"></span>',h+"px",i+"px",!0,evo_js_lang_crop_profile_pic,[evo_js_lang_crop,"btn-primary hide"],!0);var o={user_ID:a,file_ID:b,image_width:l,image_height:m,display_mode:"js",crumb_user:evo_js_crumb_user};return evo_js_is_backoffice?(o.ctrl="user",o.user_tab="crop",o.user_tab_from=c):(o.blog=evo_js_blog,o.disp="avatar",o.action="crop"),jQuery.ajax({type:"POST",url:evo_js_user_crop_ajax_url,data:o,success:function(a){openModalWindow(a,h+"px",i+"px",!0,evo_js_lang_crop_profile_pic,[evo_js_lang_crop,"btn-primary hide"])}}),!1}function user_report(a,b){openModalWindow('<span class="loader_img loader_user_report absolute_center" title="'+evo_js_lang_loading+'"></span>',"auto","",!0,evo_js_lang_report_user,[evo_js_lang_report_this_user_now,"btn-danger"],!0);var c={action:"get_user_report_form",user_ID:a,crumb_user:evo_js_crumb_user};return evo_js_is_backoffice?(c.is_backoffice=1,c.user_tab=b):c.blog=evo_js_blog,jQuery.ajax({type:"POST",url:evo_js_user_report_ajax_url,data:c,success:function(a){openModalWindow(a,"auto","",!0,evo_js_lang_report_user,[evo_js_lang_report_this_user_now,"btn-danger"])}}),!1}function user_contact_groups(a){return openModalWindow('<span class="loader_img loader_user_report absolute_center" title="'+evo_js_lang_loading+'"></span>',"auto","",!0,evo_js_lang_contact_groups,evo_js_lang_save,!0),jQuery.ajax({type:"POST",url:evo_js_user_contact_groups_ajax_url,data:{action:"get_user_contact_form",blog:evo_js_blog,user_ID:a,crumb_user:evo_js_crumb_user},success:function(a){openModalWindow(a,"auto","",!0,evo_js_lang_contact_groups,evo_js_lang_save,!0)}}),!1}var modal_window_js_initialized=!1;